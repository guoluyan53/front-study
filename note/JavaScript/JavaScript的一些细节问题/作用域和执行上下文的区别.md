一直觉得作用域和执行上下文很像很像，但是又不太分的清他们，下面区分一下他们。

看到一句很精辟的话：

`上下文是指你具体执行到了哪一条语句，作用域是指变量在哪一个代码块起作用。`

**上下文栈**：保证执行顺序

**作用域链**：保证变量访问顺序

## 作用域与执行上下文的区别

[参考文章](https://juejin.cn/post/7006980546030993422)

> 作用域：指可访问变量、对象、函数的集合。
>
> 执行上下文：是指函数调用时产生的变量对象，这个变量对象无法直接访问，但是可以访问其中的变量、this对象等。

#### **区别一：创建的时间不同**

- 全局执行上下文环境是在全局作用域确定之后，js代码马上执行之前创建的。
- 函数执行上下文是在调用函数（`fn()`），函数体代码执行之前创建的。

#### 区别二：

- 除全局作用域之外，每个函数都会创建自己的函数作用域，**作用域在函数定义时就已经确定了的**，而不是在函数调用时。
- 作用域是静态的，只要函数定义好了就一直存在，且不会再发生变化
- 执行上下文是动态的，调用函数时创建，调用结束后自动释放。

#### 联系

1. 上下文环境（对象）是从属于所在作用域的
2. 全局上下文环境对用全局作用域
3. 函数上下文环境对应函数作用域

#### 执行上下文的生命周期

1. **创建阶段**
   - 生成变量对象
     - 创建arguments
     - 扫描函数声明
     - 扫描变量声明
   - 建立作用域链
   - 确定this的指向
2. **执行阶段**
   - 变量赋值
   - 函数的引用
   - 执行其他代码

