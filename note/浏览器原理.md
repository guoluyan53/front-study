![浏览器原理面试题.png](https://gitee.com/guoluyan53/image-bed/raw/master/img/1621608379974-5f496e1b-b721-4317-bd17-c3bb0411a510.png)

# 一、浏览器安全

# 二、进程与线程

# 三、浏览器缓存

# 四、浏览器组成

# 五、浏览器渲染原理

# 六、浏览器本地存储

## 1. 浏览器本地存储方式以及使用场景

### ① Cookie  4KB

Cookie是最早被提出来的本地存储方式，在此之前，服务端是无法判断网络中的两个请求是否是同一用户发起的，为解决这个问题，Cookie就出现了。Cookie的大小只有4KB，它是一种纯文本文件，每次发起http请求都会携带Cookie

**Cookie的特性**：

- Cookie一旦创建成功，名称就无法修改
- **Cookie是无法跨域名的**，也就是说a域名和b域名下的Cookie是无法共享的，这也是由Cookie的隐私安全性决定的，这样能够阻止非法获取其他网站的Cookie。
- 每个域名下的Cookie的数量不能超过20个，每个Cookie的大小不超过4kb
- 有安全问题，如果Cookie被拦截了，那就可获得session的所有信息，即使加密也于事无补。
- Cookie在请求一个新的页面的时候都会被发送过去。

**如果需要域名之间跨域共享Cookie，有两种方法**：

1. 使用Nginx代理
2. 在一个站点登录之后，往其他网站写Cookie。服务端的Session存储到一个节点，Cookie存储SessionId。

**Cookie的使用场景**：

- 最常见的使用场景就是cookie和session结合使用，我们将sessionId存储到Cookie中，每次发送请求都会携带这个sessionId，这样服务器就知道是谁发起的请求，从而响应相应的信息。
- 可以用来统计页面的点击次数。

### ② LocalStorage  5M

**LocalStorage是html5新引入的特性**，由于有时候存储的信息量较大，Cookie就不能满足我们的需求，这时候LocalStorage就可以使用了。

**优点**：

- 大小一般为5M，可以存储更多的信息
- 是**持久性存储**，并不会随着页面的关闭而消失，除非主动清除，不然会永久存在。
- **仅存储在本地**，不像Cookie那样每次HTTP请求都会被携带

**缺点**：

- 存在浏览器兼容问题，IE8以下版本的浏览器不支持
- 如果浏览器设置为隐私模式，那么我们将无法读取LocalStorage
- LocalStorage**受到同源策略的限制**，即端口、协议、主机地址有任何一个不相同，都不会访问。

**LocalStorage常用API**：

```javascript
//保存数据到LocalStorage
LocalStorage.setItem('key','value');
//从localStorage获取数据
let data = localStorage.getItem('key');
//从LocalStorage删除保存的数据
localStorage.removeItem('key');
//从localStorage删除所有保存的数据
localStorage.clear();
//获取某个索引的key
localStorage.key(index)
```

**使用场景**：

- 有些网站有换肤的功能，这时候就可以将换肤的信息存储在本地的LocalStorage中，当需要换肤的时候，直接操作LocalStorage即可。
- 在网站中的用户浏览信息也会存储在LocalStorage中，还有网站的一些不常变动的个人信息等也可以存储在本地的LocalStorage中

### ③ SessionStorage  5M

也是HTML5提出来的存储方案，sessionStorage主要用于**临时保存**同一窗口（或标签页）的数据，刷新页面是不会删除，关闭窗口或标签页之后将会删除这些数据。

**SessionStorage和LocalStorage对比**：

- SessionStorage和LocalStorage都在**本地进行数据存储**
- SessionStorage也有同源策略的限制，但是SessionStorage **只有在同一浏览器的同一窗口下才能够共享**；
- 两者都不能被爬虫爬取。

**SessionStorage的常用API**：

```javascript
// 保存数据到 sessionStorage
sessionStorage.setItem('key', 'value');
// 从 sessionStorage 获取数据
let data = sessionStorage.getItem('key');
// 从 sessionStorage 删除保存的数据
sessionStorage.removeItem('key');
// 从 sessionStorage 删除所有保存的数据
sessionStorage.clear();
// 获取某个索引的Key
sessionStorage.key(index)
```

**使用场景**：

由于sessionStorage具有时效性，所以可以用来存储一些网站的游客登录的信息，还有**临时**的浏览记录的信息。当关闭网站之后，这些信息也就随之消除了。

## 2. cookie有哪些字段？

- **Name**：名称
- **Value**：值，对于认证cookie，value值包括web服务器所提供的访问令牌
- **Size**：大小
- **Path**：可以访问cookie的页面路径
- **Secure**：指定是否使用HTTPs安全协议发送Cookie。
- **Domain**:可以访问该cookie的域名，cookie机制并未遵循严格的同源策略，允许一个子域可以设置或获取其父域的Cookie。
- **HTTP**：该字段包含`HTTPOnly` 属性 ，该属性用来设置cookie能否通过脚本来访问，默认为空，即可以通过脚本访问。
- **Expires/Max-size**：此cookie的超时时间。

**总结**：

服务端可以使用 **Set-Cookie** 的响应头部来配置 cookie信息。一条cookie包括了5个属性值 **expires**、**domain**、**path**、**secure**、**httpOnly**。

- **Expires**：指定cookie的失效时间
- **domain和path**：限制cookie能够哪些url访问。
- **secure**：规定了Cookie只能在确保安全的情况下传输。
- **httpOnly**：规定这个cookie只能被服务器访问，不能使用js脚本访问

## 3. 前端存储的方式有哪些？

- **Cookie**：由服务器设置，在客户端存储
- **localStorage**：永久性存储，在本地存储
- **SessionStorage**：临时存储，在本地存储
- **Web SQL**：2010年被W3C废弃的本地数据库存储方案。
- **IndexedDB**：是被正式纳入HTML5标准的数据库存储方案，它是NoSQL数据库，用键值对进行存储，可以进行快速读取操作，非常适合web场景，同时用JavaScript进行操作会非常方便。

# 七、浏览器同源策略

# 八、浏览器事件机制

# 九、浏览垃圾回收机制

